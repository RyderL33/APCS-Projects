//A few assumptions.......

//Words will be separated by spaces. 
//There can be punctuation in a word, we will only add/keep punctuation at the end of a string if it is at the end of a string.
//    for examples: Hello.==> Ellohay.    Good-bye! ==> Ood-byegay!    so... ==> osay...
import java.io.IOException;
import java.util.Scanner;
import java.net.URL;

public class Book
{
    private String book;

    public Book(String url)
    {
        readBook(url);
    }

    public void readBook(String link)
    {
        try
        {
            URL url = new URL(link);
            Scanner s = new Scanner(url.openStream());

            while(s.hasNext())
            {
                String text = s.nextLine();
                System.out.println(translateSentence(text)); //the scanner separates into lines and then uses translateSentence before then printing in pig latin
                book += text;
            }
        }
        catch(IOException ex)
        {
            ex.printStackTrace();
        }
    }






    public String pigLatin(String word)
    {
        if (word == null || word.length() == 0) return word;
        if (word.contains(" ")) return translateSentence(word);
        return translateWord(word);
    }

    public int endPunctuation(String word)
    {
        if (word.matches("^[\\p{Punct}]+$")) return 0;
        for (int i = word.length() - 1; i >= 0; i--) 
        {
            char c = word.charAt(i); 
            if (Character.isLetterOrDigit(c)) 
            {
                if (i == word.length() - 1) return -1;
                else return i + 1;
            }
        }
        return -1;
    }

    public String translateWord(String word)
    {
        String vowels = "aeiouAEIOU";
        int punctIndex = endPunctuation(word);
        String punctuation = "";

        if (punctIndex > 0) 
        {
            punctuation = word.substring(punctIndex);
            word = word.substring(0, punctIndex);
        } 
        else if (punctIndex == 0) 
        {
            return word;
        }

        boolean isCapital = Character.isUpperCase(word.charAt(0));
        String lower = word.toLowerCase();
        String convertedWord;

        if (vowels.indexOf(lower.charAt(0)) != -1) 
        {
            convertedWord = lower + "yay";
        } 
        else 
        {
            int firstVowel = -1;
            for (int i = 0; i < lower.length(); i++) 
            {
                if (vowels.indexOf(lower.charAt(i)) != -1) 
                {
                    firstVowel = i;
                    break;
                }
            }
            if (firstVowel == -1) 
            {
                convertedWord = lower + "ay";
            } 
            else 
            {
                convertedWord = lower.substring(firstVowel) + lower.substring(0, firstVowel) + "ay";
            }
        }

        if (isCapital)
        {
            convertedWord = Character.toUpperCase(convertedWord.charAt(0)) + convertedWord.substring(1);
        }

        convertedWord += punctuation;
        return convertedWord;
    }

    public String translateSentence(String sentence)
    {
        String[] words = sentence.split(" ");
        String retSentence = "";
        for (int i = 0; i < words.length; i++) 
        {
            retSentence += translateWord(words[i]);
            if (i < words.length - 1) 
            {
                retSentence += " ";
            }
        }
        return retSentence;
    }

}
